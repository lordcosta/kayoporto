<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MSC | LORDCosta</title>

<style>
body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0A0E27;
    color: #E8E8E8;
    margin: 0;
}
header {
    padding: 1rem;
    background: #111633;
    border-bottom: 1px solid rgba(212,175,55,.3);
}
header h1 {
    margin: 0;
    font-size: 1.2rem;
    color: #D4AF37;
}
.container {
    padding: 1rem;
    max-width: 720px;
    margin: auto;
}
button {
    background: #D4AF37;
    border: none;
    color: #0A0E27;
    padding: .6rem 1rem;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
}
button.secondary {
    background: #333;
    color: #E8E8E8;
}
button.danger {
    background: #B03A2E;
    color: #fff;
}
.controls {
    display: flex;
    gap: .5rem;
    flex-wrap: wrap;
    margin-bottom: 1rem;
}
.form-group {
    margin-bottom: .8rem;
}
label {
    display: block;
    font-size: .8rem;
    color: #D4AF37;
    margin-bottom: .2rem;
}
input, select {
    width: 100%;
    padding: .5rem;
    border-radius: 5px;
    border: none;
}
.checkbox-group {
    display: flex;
    gap: .5rem;
    flex-wrap: wrap;
}
.nav {
    display: flex;
    justify-content: space-between;
    margin: 1rem 0;
}
.status {
    font-size: .85rem;
    opacity: .8;
}
footer {
    text-align: center;
    font-size: .75rem;
    opacity: .6;
    margin-top: 2rem;
}
</style>
</head>

<body>

<header>
    <h1>MSC ¬∑ LORDCosta</h1>
    <div class="status">Painel interno de manuten√ß√£o ¬∑ JSON Editor</div>
</header>

<div class="container">

<div class="controls">
    <button onclick="loadJSON()">üìÇ Carregar Exerc√≠cios</button>
    <button onclick="newExercise()">‚ûï Novo</button>
    <button class="danger" onclick="deleteExercise()">üóëÔ∏è Excluir</button>
    <button class="secondary" onclick="downloadJSON()">üíæ Baixar JSON</button>
</div>

<div class="nav">
    <button class="secondary" onclick="prev()">‚¨ÖÔ∏è Anterior</button>
    <div id="counter">0 / 0</div>
    <button class="secondary" onclick="next()">‚û°Ô∏è Pr√≥ximo</button>
</div>

<form id="form">

<div class="form-group">
<label>Grupo Muscular</label>
<select id="grupo" onchange="changeGroup()">
<option value="peitorais">Peitorais</option>
<option value="costas">Costas</option>
<option value="ombros">Ombros</option>
<option value="biceps">B√≠ceps</option>
<option value="triceps">Tr√≠ceps</option>
<option value="pernas">Pernas</option>
<option value="abdomen">Abd√¥men</option>
</select>
</div>

<div class="form-group">
<label>ID</label>
<input id="id">
</div>

<div class="form-group">
<label>Nome</label>
<input id="nome">
</div>

<div class="form-group">
<label>Tipo</label>
<select id="tipo">
<option value="composto">Composto</option>
<option value="isolador">Isolador</option>
<option value="isometrico">Isom√©trico</option>
</select>
</div>

<div class="form-group">
<label>N√≠vel m√≠nimo</label>
<select id="nivel">
<option value="iniciante">Iniciante</option>
<option value="intermediario">Intermedi√°rio</option>
<option value="avancado">Avan√ßado</option>
</select>
</div>

<div class="form-group">
<label>Prioridade</label>
<input type="number" id="prioridade" min="1">
</div>

<div class="form-group">
<label>Equipamento</label>
<div class="checkbox-group">
<label><input type="checkbox" value="barra"> Barra</label>
<label><input type="checkbox" value="halter"> Halter</label>
<label><input type="checkbox" value="maquina"> M√°quina</label>
<label><input type="checkbox" value="cabo"> Cabo</label>
<label><input type="checkbox" value="peso_corporal"> Peso corporal</label>
</div>
</div>

</form>

<footer>
MSC ¬∑ LORDCosta ¬∑ uso interno
</footer>

</div>

<script>
const DATA_PATH = "data/";

let data = {};
let grupoAtual = "peitorais";
let index = 0;

async function loadJSON() {
    try {
        const res = await fetch(DATA_PATH + "exercicios.json");
        if (!res.ok) throw new Error("Erro HTTP " + res.status);

        data = await res.json();
        grupoAtual = Object.keys(data)[0];
        index = 0;
        document.getElementById("grupo").value = grupoAtual;
        render();

    } catch (err) {
        alert("Erro ao carregar exercicios.json");
        console.error(err);
    }
}

function changeGroup() {
    saveCurrent();
    grupoAtual = document.getElementById("grupo").value;
    index = 0;
    render();
}

function render() {
    const list = data[grupoAtual];
    if (!list || list.length === 0) return;

    const e = list[index];
    id.value = e.id || "";
    nome.value = e.nome || "";
    tipo.value = e.tipo || "isolador";
    nivel.value = e.nivel_minimo || "iniciante";
    prioridade.value = e.prioridade || 1;

    document.querySelectorAll(".checkbox-group input").forEach(cb => {
        cb.checked = e.equipamento?.includes(cb.value);
    });

    counter.innerText = (index + 1) + " / " + list.length;
}

function saveCurrent() {
    if (!data[grupoAtual]) return;
    data[grupoAtual][index] = {
        id: id.value.trim(),
        nome: nome.value.trim(),
        tipo: tipo.value,
        equipamento: [...document.querySelectorAll(".checkbox-group input:checked")].map(cb => cb.value),
        nivel_minimo: nivel.value,
        prioridade: Number(prioridade.value || 1)
    };
}

function next() {
    saveCurrent();
    if (index < data[grupoAtual].length - 1) index++;
    render();
}

function prev() {
    saveCurrent();
    if (index > 0) index--;
    render();
}

function newExercise() {
    saveCurrent();
    data[grupoAtual].push({
        id: "",
        nome: "",
        tipo: "isolador",
        equipamento: [],
        nivel_minimo: "iniciante",
        prioridade: 1
    });
    index = data[grupoAtual].length - 1;
    render();
}

function deleteExercise() {
    if (!confirm("Excluir este exerc√≠cio?")) return;
    data[grupoAtual].splice(index, 1);
    index = Math.max(0, index - 1);
    render();
}

function downloadJSON() {
    saveCurrent();
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "exercicios.json";
    a.click();
}
</script>

</body>
</html>
